## REST API 디자인 규칙

1. URL 에는 동사를 쓰지 말고, 자원을 표시한다.
2. 동사는 HTTP 메서드로 표현한다.
3. 자원의 종류가ㅣ 컬렉션인지 도큐먼트인지에 따라 단수, 복수를 나눈다.
4. 슬래시는 계층 관계를 나타내는데 사용한다.
5. 밑줄 대신 하이픈을 사용한다.

## api 테스트

- 웹브라우저 개발자 도구
- curl
- Intellij IDEA Ultimate- http request
- Postman
- XUnit
- HTTPie

```
http -v ":8080/hello?name=spring"
```

## HTTP

### Request

- Request Line: Method, Path, HTTP Version
- Headers
- Message Body

### Response

- Status Line: HTTP Version, Status Code, Status Text
- Headers
- Message Body

## 토큰 인증 방식 로그인

- 무상태성 : 서버에서 세션을 유지하는게 아닌 클라이언트 측을 이용하는 것이므로
- 확장성 : 여러 서비스의 msa 방식에서도 관리가 편함
- 무결성 : 토근 발급 이후 토큰 정보를 변경하는 행위는 할 수 없음, 하더라도 서버에서 유효하지 않게 되기 때문

### JWT 구성

| 이름 | 설명                                                         |
| ---- | ------------------------------------------------------------ |
| iss  | 토큰 발급자(issuer)                                          |
| sub  | 토큰 제목(subject)                                           |
| aud  | 토큰 대상자(audiance)                                        |
| exp  | 토큰의 만료 시간(expiration), 시간은 NumericDate형식         |
| nbf  | 토큰의 활성 날짜와 비슷한 개념으로 nbf는 Not Before를 의미, NumericDate 형식으로 이 날짜가 지나기 전까지는 토큰이 처리되지 않음 |
| iat  | 토큰이 발급된 시간(issued at)                                |
| jti  | JWT의 고유 식별자로서 주로 일회용 토근에서 사용함            |

### 리프레시 토큰

> 액세스 토큰의 유효기간이 길다면 그 기간 만큼 마음대로 이용이 가능하므로 탈취되었을 경우 큰 문제가 발생할 수 있다. 그렇다고 액세스 토큰을 유효기간을 짧게 준다면 잦은 발급으로 사용자가 이용에 불편할 수 있다. 따라서 고안된 개념이 리프레시 토큰이다. 사용자를 인증하기 위한 용도가 아닌 액세스 토큰이 만료되었을 때 새로운 액세스 토큰을 발급하기 위해 사용한다.

**토큰 인증 프로세스**

1. 인증요청
2. 액세스 토큰 & 리프레시 토큰 응답
3. 리프레시 토큰 저장
4. 요청
5. 토큰 유효성 검사 & 응답
6. (만료된 액세스 토큰과 함께) 요청
7. 토큰 만료 응답
8. (리프레시 토큰과 함께) 액세스 토큰 발급 요청
9. 리프레시 토큰 조회 & 유효성 검사
10. 새로운 액세스 토큰 응답
